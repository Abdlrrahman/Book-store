<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.w3.org/1000/xhtml">

<head th:replace="common/header :: common-header" />

<body>

    <div th:replace="common/header :: navbar" />

    <div class="container-fluid">
        <div class="row">
            <hr
                style="position: absolute; width:100%; height:6px; background-color: #333; z-index:-1; margin-top:100px;" />
            <div class="col-8">
                <h2 class="section-headline"><span>User Account</span></h2>
            </div>
            <div class="col-2">
                <img src="/image/logo.jpg" alt="logo" class="img-fluid" style="margin-top: 75px;" />
            </div>
        </div>
        <img class="img-fluid" src="/image/wood.png" style="margin-top: 25px;" />

        <div class="row justify-content-center" style="margin-top: 10px;">
            <form th:action="@{/checkout}" method="post">

                <!-- Left Panel -->
                <div class="col-4">
                    <div class="card">
                        <div class="card-body">
                            <button type="submit" class="btn btn-warning btn-block">Place your order</button>
                            <p style="font-size:smaller;">By placing your order, you agree to Happy Bookstore
                                <a href="#">privacy</a> notice and <a href="#">conditions</a> of use.</p>
                            <hr />
                            <h3>Order Summary</h3>
                            <div class="row">
                                <div class="col-7 text-left">
                                    Total before tax:
                                </div>
                                <div class="col-5 text-right">
                                    $<span th:text="${shoppingCart.grandTotal}"></span>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-7 text-left">
                                    <h3 style="color:darkred;"><strong>Order Total: </strong></h3>
                                </div>
                                <div class="col-5 text-right">
                                    <h3><strong style="color:darkred;">$<span
                                                th:with="total=${shoppingCart.grandTotal+shoppingCart.grandTotal*0.06}"
                                                th:text="${#numbers.formatDecimal(total, 0 ,2)}"></span></strong></h3>
								</div>
							</div>
							<div class="card-footer">Shipping and handling haven't applied.</div>
						</div>
					</div>
				</div>
				
				<!-- Checkout Info -->
				<div class="col-8">
                    <div th:if=${missingRequiredField}>
                        <h5 class="alert alert-warning"> there are some fields missing. field with * is requierd</h5>
                    </div>
                    <div class="card-group" id="accordion">

                        <!-- 1. Shipping Address -->
                        <div class="card">
                            <div class="card-header">
                                <h4 class="card-title">
                                    <a data-toggle="collapse" data-parent="#accordion" href="#shippingInfo">
                                        1. Shipping Address
                                    </a>
                                </h4>
                            </div>
                            <div id="shippingInfo" class="collapse" th:classappend="${classActiveShipping} 'in'">
                              <div class="card-body">
                                  <table class="table" th:if="${not emptyShippingList}">
                                      <thead>
                                          <tr>
                                              <th>
                                                  Available Shipping Address
                                              </th>
                                              <th>
                                                Operations
                                            </th>
                                          </tr>
                                      </thead>
                                      <tbody>
                                          <tr th:each="userShipping : ${userShippingList}">
                                              <td th:text="${userShipping.userShippingStreet1}+' '+${userShipping.userShippingStreet2}+', '+${userShipping.userShippingCity}+', '+${userShipping.userShippingState}">
                                              </td>
                                              <td>
                                                <a th:href="${/setShippingAddress(userShippingId=${userShipping.id})}">
                                                  use this address
                                                </a>
                                              </td>      
                                          </tr>
                                      </tbody>
                                  </table>
                              <div class="card-group">
                                <label for="shippingName">* Name</label> <input type="text"
                                    class="form-control" id="shippingName"
                                    placeholder="Receiver Name" name="shippingAddressName"
                                    th:value="${shippingAddress.shippingAddressName}" />
                            </div>
                            
                            <div class="card-group">
                                <label for="shippingStreet">* Street Address</label> <input type="text"
                                    class="form-control" id="shippingStreet"
                                    placeholder="Street Address 1" name="shippingAddressStreet1"
                                    th:value="${shippingAddress.shippingAddressStreet1}" />
                            </div>
                            <div class="card-group">
                                <input type="text"
                                    class="form-control"
                                    placeholder="Street Address 2" name="shippingAddressStreet2"
                                    th:value="${shippingAddress.shippingAddressStreet2}" />
                            </div>
                            
                            <div class="row">
                                        <div class="col-4">
                                            <div class="card-group">
                                                <label for="shippingCity">* City</label> <input type="text"
                                                    class="form-control" id="shippingCity"
                                                    placeholder="Shipping City" th:name="shippingAddressCity"
                                                    required="required"
                                                    th:value="${shippingAddress.shippingAddressCity}" />
                                            </div>
                                        </div>
                                        <div class="col-4">
                                            <div class="card-group">
                                                <label for="shippingState">* State</label> <select
                                                    id="shippingState" class="form-control"
                                                    th:name="shippingAddresstate"
                                                    th:value="${shippingAddress.shippingAddressState}"
                                                    required="required">
                                                    <option value="" disabled="disabled">Please
                                                        select an option</option>
                                                    <option th:each="state : ${stateList}" th:text="${state}"
                                                        th:selected="(${shippingAddress.shippingAddressState}==${state})"></option>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="col-4">
                                            <div class="card-group">
                                                <label for="shippingZipcode">* Zipcode</label> <input
                                                    type="text" class="form-control" id="shippingZipcode"
                                                    placeholder="Shipping Zipcode"
                                                    th:name="shippingAddressZipcode" required="required"
                                                    th:value="${shippingAddress.shippingAddressZipcode}" />
                                            </div>
                                        </div>
                                    </div>
                                    <a data-toggele="collapse" data-parent="#accordion" class="btn btn-warning pull-right" href="#paymentInfo">Next</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </form>
</div>
</div>
<!-- end of container -->


    <div th:replace="common/header :: scripts" />
</body>

</html>